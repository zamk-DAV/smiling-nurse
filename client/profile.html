<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>스마일링 널스 - 프로필</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <nav class="nav">
    <a href="dashboard.html" class="nav-brand" style="text-decoration: none; color: inherit; cursor: pointer;">
      <span>😊🩺</span>
      <span>스마일링 널스</span>
    </a>
    <ul class="nav-menu">
      <li><a href="dashboard.html">대시보드</a></li>
      <li><a href="daily-check.html">오늘의 기록</a></li>
      <li><a href="statistics.html">통계</a></li>
      <li><a href="profile.html" class="active">프로필</a></li>
      <li><a href="#" onclick="logout()">로그아웃</a></li>
    </ul>
  </nav>

  <div class="container">
    <div class="card" style="max-width: 800px; margin: 0 auto;">
      <div class="header">
        <div class="logo">👤</div>
        <h1>프로필 설정</h1>
        <p>나의 정보를 관리하세요</p>
      </div>

      <form id="profile-form">
        <div class="card" style="background: linear-gradient(135deg, var(--light-green), rgba(255, 255, 255, 0.8)); margin-bottom: 28px; padding: 28px;">
          <h2 style="color: var(--primary-green); margin-bottom: 20px;">📋 기본 정보</h2>

          <div class="form-group">
            <label for="name">이름</label>
            <input type="text" id="name" name="name" required>
          </div>

          <div class="grid grid-2">
            <div class="form-group">
              <label for="age">연령</label>
              <input type="number" id="age" name="age" min="20" max="100" required>
            </div>

            <div class="form-group">
              <label for="gender">성별</label>
              <select id="gender" name="gender" required>
                <option value="">선택하세요</option>
                <option value="여성">여성</option>
                <option value="남성">남성</option>
              </select>
            </div>
          </div>

          <div class="grid grid-2">
            <div class="form-group">
              <label for="height">키 (cm)</label>
              <input type="number" id="height" name="height" min="100" max="250" step="0.1" required>
            </div>

            <div class="form-group">
              <label for="weight">몸무게 (kg)</label>
              <input type="number" id="weight" name="weight" min="30" max="200" step="0.1" required>
            </div>
          </div>

          <div class="form-group">
            <label for="occupation">직업</label>
            <input type="text" id="occupation" name="occupation" required>
          </div>
        </div>

        <div class="card" style="background: var(--accent-blue); margin-bottom: 28px; padding: 28px;">
          <h2 style="color: var(--primary-green); margin-bottom: 20px;">👩‍⚕️ 간호사 정보 (선택사항)</h2>
          <p style="color: var(--text-gray); font-size: 14px; margin-bottom: 20px;">간호사이신 경우 아래 정보를 입력해주세요. AI가 더 정확한 조언을 제공합니다.</p>

          <div class="grid grid-3">
            <div class="form-group">
              <label for="years-of-experience">경력 (년차)</label>
              <input type="number" id="years-of-experience" name="yearsOfExperience" placeholder="예: 5" min="0" max="50">
            </div>

            <div class="form-group">
              <label for="position">직책</label>
              <select id="position" name="position">
                <option value="">선택하세요</option>
                <option value="학생 간호사">학생 간호사</option>
                <option value="일반 간호사">일반 간호사</option>
                <option value="주임 간호사">주임 간호사</option>
                <option value="책임 간호사">책임 간호사</option>
                <option value="수간호사">수간호사</option>
                <option value="파트장">파트장</option>
                <option value="간호부장">간호부장</option>
              </select>
            </div>

            <div class="form-group">
              <label for="department">진료과</label>
              <select id="department" name="department">
                <option value="">선택하세요</option>
                <option value="내과">내과</option>
                <option value="외과">외과</option>
                <option value="응급실">응급실</option>
                <option value="중환자실">중환자실</option>
                <option value="소아과">소아과</option>
                <option value="산부인과">산부인과</option>
                <option value="정형외과">정형외과</option>
                <option value="신경과">신경과</option>
                <option value="정신건강의학과">정신건강의학과</option>
                <option value="재활의학과">재활의학과</option>
                <option value="수술실">수술실</option>
                <option value="기타">기타</option>
              </select>
            </div>
          </div>
        </div>

        <div class="card" style="margin-bottom: 28px; padding: 28px;">
          <h2 style="color: var(--primary-green); margin-bottom: 20px;">🏥 만성질환 및 기저질환</h2>
          <div id="disease-selector-container"></div>
        </div>

        <button type="submit" class="btn btn-primary btn-full">💾 저장하기</button>
        <a href="dashboard.html" class="btn btn-secondary btn-full">취소</a>
      </form>
    </div>
  </div>

  <script src="js/config.js"></script>
  <script src="js/disease-selector.js"></script>
  <script src="js/auth.js"></script>
  <script src="js/profile.js"></script>

  <!-- Select 드롭다운 개선 스크립트 -->
  <script>
    // 모든 select 요소에 대한 개선
    document.addEventListener('DOMContentLoaded', () => {
      const allSelects = document.querySelectorAll('select');

      allSelects.forEach(select => {
        // Select가 포커스될 때 화면 중앙으로 부드럽게 스크롤
        select.addEventListener('focus', function() {
          setTimeout(() => {
            this.scrollIntoView({
              behavior: 'smooth',
              block: 'center',
              inline: 'nearest'
            });
          }, 100);
        });

        // 모바일에서 select 열릴 때 더 나은 처리
        select.addEventListener('mousedown', function(e) {
          // Select의 현재 위치 저장
          const rect = this.getBoundingClientRect();
          const viewportHeight = window.innerHeight;

          // Select가 화면 하단에 너무 가까우면 위로 스크롤
          if (rect.bottom > viewportHeight - 100) {
            this.scrollIntoView({
              behavior: 'smooth',
              block: 'center'
            });
          }
        });

        // 선택 완료 시 포커스 해제 (키보드 숨김)
        select.addEventListener('change', function() {
          this.blur();
        });
      });
    });
  </script>
</body>
</html>