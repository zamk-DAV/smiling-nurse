<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>스마일링 널스 - 회원가입</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <div class="auth-container">
    <div class="card" style="max-width: 700px; width: 100%;">
      <div class="header">
        <div class="logo">😊🩺</div>
        <h1>스마일링 널스 회원가입</h1>
        <p>건강한 마음을 위한 첫 걸음</p>
      </div>

      <div class="steps">
        <div class="step active">1</div>
        <div class="step">2</div>
      </div>

      <div class="progress-bar">
        <div class="progress-fill" style="width: 50%;"></div>
      </div>

      <form id="signup-form">
        <div class="step-content">
          <h2 style="color: var(--primary-green); margin-bottom: 24px;">💳 계정 정보 입력</h2>

          <div class="form-group">
            <label for="signup-username">아이디</label>
            <input type="text" id="signup-username" name="username" placeholder="사용할 아이디를 입력하세요" required>
          </div>

          <div class="form-group">
            <label for="signup-password">비밀번호</label>
            <input type="password" id="signup-password" name="password" placeholder="6자 이상의 비밀번호를 입력하세요" required>
          </div>

          <div class="form-group">
            <label for="confirm-password">비밀번호 확인</label>
            <input type="password" id="confirm-password" name="confirm-password" placeholder="비밀번호를 다시 입력하세요" required>
          </div>
        </div>

        <div class="step-content" style="display: none;">
          <h2 style="color: var(--primary-green); margin-bottom: 24px;">👤 기본 정보 입력</h2>

          <div class="form-group">
            <label for="name">이름</label>
            <input type="text" id="name" name="name" placeholder="이름을 입력하세요" required>
          </div>

          <div class="grid grid-2">
            <div class="form-group">
              <label for="age">연령</label>
              <input type="number" id="age" name="age" placeholder="나이" min="20" max="100" required>
            </div>

            <div class="form-group">
              <label for="gender">성별</label>
              <select id="gender" name="gender" required>
                <option value="">선택하세요</option>
                <option value="여성">여성</option>
                <option value="남성">남성</option>
              </select>
            </div>
          </div>

          <div class="grid grid-2">
            <div class="form-group">
              <label for="height">키 (cm)</label>
              <input type="number" id="height" name="height" placeholder="예: 165" min="100" max="250" step="0.1" required>
            </div>

            <div class="form-group">
              <label for="weight">몸무게 (kg)</label>
              <input type="number" id="weight" name="weight" placeholder="예: 60" min="30" max="200" step="0.1" required>
            </div>
          </div>

          <div class="form-group">
            <label for="occupation">직업</label>
            <input type="text" id="occupation" name="occupation" placeholder="예: 간호사" required>
          </div>

          <div class="card" style="background: var(--light-green); margin: 24px 0; padding: 20px;">
            <h3 style="color: var(--primary-green); margin-bottom: 16px;">👩‍⚕️ 간호사 정보 (선택사항)</h3>

            <div class="grid grid-3">
              <div class="form-group">
                <label for="years-of-experience">경력 (년차)</label>
                <input type="number" id="years-of-experience" name="yearsOfExperience" placeholder="예: 5" min="0" max="50">
              </div>

              <div class="form-group">
                <label for="position">직책</label>
                <select id="position" name="position">
                  <option value="">선택하세요</option>
                  <option value="학생 간호사">학생 간호사</option>
                  <option value="일반 간호사">일반 간호사</option>
                  <option value="주임 간호사">주임 간호사</option>
                  <option value="책임 간호사">책임 간호사</option>
                  <option value="수간호사">수간호사</option>
                  <option value="파트장">파트장</option>
                  <option value="간호부장">간호부장</option>
                </select>
              </div>

              <div class="form-group">
                <label for="department">진료과</label>
                <select id="department" name="department">
                  <option value="">선택하세요</option>
                  <option value="내과">내과</option>
                  <option value="외과">외과</option>
                  <option value="응급실">응급실</option>
                  <option value="중환자실">중환자실</option>
                  <option value="소아과">소아과</option>
                  <option value="산부인과">산부인과</option>
                  <option value="정형외과">정형외과</option>
                  <option value="신경과">신경과</option>
                  <option value="정신건강의학과">정신건강의학과</option>
                  <option value="재활의학과">재활의학과</option>
                  <option value="수술실">수술실</option>
                  <option value="기타">기타</option>
                </select>
              </div>
            </div>
          </div>

          <div class="form-group">
            <label>🏥 만성질환 및 기저질환 (선택사항)</label>
            <div id="disease-selector-container"></div>
          </div>
        </div>

        <div style="display: flex; gap: 12px; margin-top: 28px;">
          <button type="button" id="prev-btn" class="btn btn-secondary" style="flex: 1; display: none;">
            ← 이전
          </button>
          <button type="button" id="next-btn" class="btn btn-primary" style="flex: 1;">
            다음 →
          </button>
          <button type="submit" id="submit-btn" class="btn btn-primary" style="flex: 1; display: none;">
            ✨ 가입 완료
          </button>
        </div>
      </form>

      <div class="text-center">
        <p>이미 계정이 있으신가요? <a href="index.html" class="text-link">로그인</a></p>
      </div>
    </div>
  </div>

  <script src="js/config.js"></script>
  <script src="js/disease-selector.js"></script>
  <script src="js/auth.js"></script>

  <!-- Select 드롭다운 개선 스크립트 -->
  <script>
    // 모든 select 요소에 대한 개선
    document.addEventListener('DOMContentLoaded', () => {
      const allSelects = document.querySelectorAll('select');

      allSelects.forEach(select => {
        // Select가 포커스될 때 화면 중앙으로 부드럽게 스크롤
        select.addEventListener('focus', function() {
          setTimeout(() => {
            this.scrollIntoView({
              behavior: 'smooth',
              block: 'center',
              inline: 'nearest'
            });
          }, 100);
        });

        // 모바일에서 select 열릴 때 더 나은 처리
        select.addEventListener('mousedown', function(e) {
          // Select의 현재 위치 저장
          const rect = this.getBoundingClientRect();
          const viewportHeight = window.innerHeight;

          // Select가 화면 하단에 너무 가까우면 위로 스크롤
          if (rect.bottom > viewportHeight - 100) {
            this.scrollIntoView({
              behavior: 'smooth',
              block: 'center'
            });
          }
        });

        // 선택 완료 시 포커스 해제 (키보드 숨김)
        select.addEventListener('change', function() {
          this.blur();
        });
      });
    });
  </script>
</body>
</html>